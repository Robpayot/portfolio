!function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return o(t?t:e)},f,f.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e("modernizr");var o=e("./xp/xp");r(o)},{"./xp/xp":3,modernizr:2}],2:[function(e,n,t){(function(e){(function(e,n,t,r,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,t,r){function o(e,n){return("undefined"==typeof e?"undefined":i(e))===n}function a(){var e,n,t,r,i,a,u;for(var c in T)if(T.hasOwnProperty(c)){if(e=[],n=T[c],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(r=o(n.fn,"function")?n.fn():n.fn,i=0;i<e.length;i++)a=e[i],u=a.split("."),1===u.length?S[u[0]]=r:(!S[u[0]]||S[u[0]]instanceof Boolean||(S[u[0]]=new Boolean(S[u[0]])),S[u[0]][u[1]]=r),w.push((r?"":"no-")+u.join("-"))}}function u(e){var n=C.className,t=S._config.classPrefix||"";if(A&&(n=n.baseVal),S._config.enableJSClass){var r=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(r,"$1"+t+"js$2")}S._config.enableClasses&&(n+=" "+t+e.join(" "+t),A?C.className.baseVal=n:C.className=n)}function c(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):A?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function s(){var e=t.body;return e||(e=c(A?"svg":"body"),e.fake=!0),e}function f(e,n,r,o){var i,a,u,f,l="modernizr",d=c("div"),p=s();if(parseInt(r,10))for(;r--;)u=c("div"),u.id=o?o[r]:l+(r+1),d.appendChild(u);return i=c("style"),i.type="text/css",i.id="s"+l,(p.fake?p:d).appendChild(i),p.appendChild(d),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),d.id=l,p.fake&&(p.style.background="",p.style.overflow="hidden",f=C.style.overflow,C.style.overflow="hidden",C.appendChild(p)),a=n(d,e),p.fake?(p.parentNode.removeChild(p),C.style.overflow=f,C.offsetHeight):d.parentNode.removeChild(d),!!a}function l(e,n){return!!~(""+e).indexOf(n)}function d(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function p(e,n){return function(){return e.apply(n,arguments)}}function v(e,n,t){var r;for(var i in e)if(e[i]in n)return t===!1?e[i]:(r=n[e[i]],o(r,"function")?p(r,t||n):r);return!1}function h(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(e,t){var o=e.length;if("CSS"in n&&"supports"in n.CSS){for(;o--;)if(n.CSS.supports(h(e[o]),t))return!0;return!1}if("CSSSupportsRule"in n){for(var i=[];o--;)i.push("("+h(e[o])+":"+t+")");return i=i.join(" or "),f("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return r}function g(e,n,t,i){function a(){s&&(delete D.style,delete D.modElem)}if(i=!o(i,"undefined")&&i,!o(t,"undefined")){var u=m(e,t);if(!o(u,"undefined"))return u}for(var s,f,p,v,h,g=["modernizr","tspan"];!D.style;)s=!0,D.modElem=c(g.shift()),D.style=D.modElem.style;for(p=e.length,f=0;f<p;f++)if(v=e[f],h=D.style[v],l(v,"-")&&(v=d(v)),D.style[v]!==r){if(i||o(t,"undefined"))return a(),"pfx"!=n||v;try{D.style[v]=t}catch(e){}if(D.style[v]!=h)return a(),"pfx"!=n||v}return a(),!1}function y(e,n,t,r,i){var a=e.charAt(0).toUpperCase()+e.slice(1),u=(e+" "+k.join(a+" ")+a).split(" ");return o(n,"string")||o(n,"undefined")?g(u,n,r,i):(u=(e+" "+q.join(a+" ")+a).split(" "),v(u,n,t))}function b(e,n,t){return y(e,r,r,n,t)}var w=[],T=[],x={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){T.push({name:e,fn:n,options:t})},addAsyncTest:function(e){T.push({name:null,fn:e})}},S=function(){};S.prototype=x,S=new S,S.addTest("history",function(){var e=navigator.userAgent;return(e.indexOf("Android 2.")===-1&&e.indexOf("Android 4.0")===-1||e.indexOf("Mobile Safari")===-1||e.indexOf("Chrome")!==-1||e.indexOf("Windows Phone")!==-1)&&(n.history&&"pushState"in n.history)});var C=t.documentElement,A="svg"===C.nodeName.toLowerCase();A||!function(n,t){function r(e,n){var t=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return t.innerHTML="x<style>"+n+"</style>",r.insertBefore(t.lastChild,r.firstChild)}function o(){var e=T.elements;return"string"==typeof e?e.split(" "):e}function a(e,n){var t=T.elements;"string"!=typeof t&&(t=t.join(" ")),"string"!=typeof e&&(e=e.join(" ")),T.elements=t+" "+e,l(n)}function u(e){var n=w[e[y]];return n||(n={},b++,e[y]=b,w[b]=n),n}function c(e,n,r){if(n||(n=t),p)return n.createElement(e);r||(r=u(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():g.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||m.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function s(e,n){if(e||(e=t),p)return e.createDocumentFragment();n=n||u(e);for(var r=n.frag.cloneNode(),i=0,a=o(),c=a.length;i<c;i++)r.createElement(a[i]);return r}function f(e,n){n.cache||(n.cache={},n.createElem=e.createElement,n.createFrag=e.createDocumentFragment,n.frag=n.createFrag()),e.createElement=function(t){return T.shivMethods?c(t,e,n):n.createElem(t)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/[\w\-:]+/g,function(e){return n.createElem(e),n.frag.createElement(e),'c("'+e+'")'})+");return n}")(T,n.frag)}function l(e){e||(e=t);var n=u(e);return!T.shivCSS||d||n.hasCSS||(n.hasCSS=!!r(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),p||f(e,n),e}var d,p,v="3.7.3",h=n.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,g=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,y="_html5shiv",b=0,w={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,p=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(e){d=!0,p=!0}}();var T={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:v,shivCSS:h.shivCSS!==!1,supportsUnknownElements:p,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:c,createDocumentFragment:s,addElements:a};n.html5=T,l(t),"object"==("undefined"==typeof e?"undefined":i(e))&&e.exports&&(e.exports=T)}("undefined"!=typeof n?n:this,t),S.addTest("webgl",function(){var e=c("canvas"),t="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return t in e?e[t]("webgl")||e[t]("experimental-webgl"):"WebGLRenderingContext"in n});var E=x._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];x._prefixes=E,S.addTest("csscalc",function(){var e="width:",n="calc(10px);",t=c("a");return t.style.cssText=e+E.join(n+e),!!t.style.length}),S.addTest("cssgradients",function(){for(var e,n="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",o=0,i=E.length-1;o<i;o++)e=0===o?"to ":"",r+=n+E[o]+"linear-gradient("+e+"left top, #9f9, white);";S._config.usePrefixes&&(r+=n+"-webkit-"+t);var a=c("a"),u=a.style;return u.cssText=r,(""+u.backgroundImage).indexOf("gradient")>-1});var M="CSS"in n&&"supports"in n.CSS,O="supportsCSS"in n;S.addTest("supports",M||O);var _=x.testStyles=f,L="Moz O ms Webkit",k=x._config.usePrefixes?L.split(" "):[];x._cssomPrefixes=k;var q=x._config.usePrefixes?L.toLowerCase().split(" "):[];x._domPrefixes=q;var P={elem:c("modernizr")};S._q.push(function(){delete P.elem});var D={style:P.elem.style};S._q.unshift(function(){delete D.style}),x.testAllProps=y,x.testAllProps=b,S.addTest("cssanimations",b("animationName","a",!0)),S.addTest("csstransforms3d",function(){var e=!!b("perspective","1px",!0),n=S._config.usePrefixes;if(e&&(!n||"webkitPerspective"in C.style)){var t,r="#modernizr{width:0;height:0}";S.supports?t="@supports (perspective: 1px)":(t="@media (transform-3d)",n&&(t+=",(-webkit-transform-3d)")),t+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",_(r+t,function(n){e=7===n.offsetWidth&&18===n.offsetHeight})}return e}),a(),u(w),delete x.addTest,delete x.addAsyncTest;for(var F=0;F<S._q.length;F++)S._q[F]();n.Modernizr=S}(window,document),o("undefined"!=typeof Modernizr?Modernizr:window.Modernizr)}).call(e,void 0,void 0,void 0,void 0,function(e){n.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("sono"),u=(r(a),function(){function e(){o(this,e),this.draw=this.draw.bind(this),this.events=this.events.bind(this),this.changeFtt=this.changeFtt.bind(this),this.init()}return i(e,[{key:"init",value:function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.myAudio=document.querySelector("audio"),this.frequencyB=document.querySelector(".frequency .block"),this.amplitudeB=document.querySelector(".amplitude .block"),this.waveFormB=document.querySelector(".waveForm .block"),this.ptichB=document.querySelector(".pitch .block"),this.formFtt=document.querySelector(".fttSize"),this.analyser=this.audioCtx.createAnalyser();var e=this.audioCtx.createMediaElementSource(this.myAudio);e.connect(this.analyser),this.analyser.connect(this.audioCtx.destination),this.analyser.fftSize=256,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.canvas=document.querySelector(".canvas"),this.canvas.width=1400,this.canvas.height=200,this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.clearRect(0,0,500,500),this.events(),this.draw()}},{key:"events",value:function(){this.formFtt.addEventListener("change",this.changeFtt)}},{key:"changeFtt",value:function(e){this.analyser.fftSize=this.formFtt.value,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray)}},{key:"draw",value:function(){requestAnimationFrame(this.draw),this.analyser.getByteFrequencyData(this.dataArray),this.canvasCtx.fillStyle="rgb(0, 0, 0)",this.canvasCtx.fillRect(0,0,this.canvas.width,500);for(var e,n=500/this.bufferLength*2.5,t=0,r=0;r<this.bufferLength;r++){e=this.dataArray[r]/2;var o=r/this.analyser.frequencyBinCount*360;this.canvasCtx.fillStyle="hsl("+o+", 100%, 50%)",this.canvasCtx.fillRect(t,this.canvas.height-e/2,n,e),t+=n+1}}}]),e}());t.default=new u},{sono:4}],4:[function(e,n,t){!function(e,r){"object"==typeof t&&"undefined"!=typeof n?n.exports=r():"function"==typeof define&&define.amd?define(r):e.sono=r()}(this,function(){"use strict";function e(e){if("string"!=typeof e)return"";if("data:"===e.slice(0,5)){var n=e.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(n&&n.length>1)return n[1].toLowerCase()}e=e.split("?")[0],e=e.slice(e.lastIndexOf("/")+1);var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()}function n(n){var t=void 0;if(Array.isArray(n))for(var r=0;r<n.length;r++){t=n[r];var o=e(t);if(ne.indexOf(o)>-1)break}else"object"===("undefined"==typeof n?"undefined":Q(n))&&Object.keys(n).some(function(r){t=n[r];var o=e(t);return ne.indexOf(o)>-1});return t||n}function t(e){return!!(e&&window.AudioBuffer&&e instanceof window.AudioBuffer)}function r(e){return!!(e&&window.ArrayBuffer&&e instanceof window.ArrayBuffer)}function o(e){return!!(e&&window.HTMLMediaElement&&e instanceof window.HTMLMediaElement)}function i(e){return!!(e&&"function"==typeof e.getAudioTracks&&e.getAudioTracks().length&&window.MediaStreamTrack&&e.getAudioTracks()[0]instanceof window.MediaStreamTrack)}function a(e){return!(!e||"string"!=typeof e||"sine"!==e&&"square"!==e&&"sawtooth"!==e&&"triangle"!==e)}function u(e){return!!(e&&"object"===("undefined"==typeof e?"undefined":Q(e))&&e.bufferSize&&e.channels&&e.callback)}function c(e){return!(!e||"string"!=typeof e||!(e.indexOf(".")>-1||"data:"===e.slice(0,5)))}function s(e){if(!e||o(e))return!1;var n=e.src||e.url||e.data||e;return c(n)||r(n)||Array.isArray(n)&&c(n[0])}function f(e,n){function t(e){var n=12*(Math.log(e/440)/Math.log(2));return Math.round(n)+69}function r(e){return 440*Math.pow(2,(e-69)/12)}function o(e,n){return Math.floor(1200*Math.log(e/r(n))/Math.log(2))}function i(e,n){return!e||(u.fftSize!==c||(!!(n&&e instanceof Uint8Array)||!n&&e instanceof Float32Array))}function a(e,n){return e?new Float32Array(n):new Uint8Array(n)}n=n||{};var u=e.createAnalyser(),c=n.fftSize||512,s=!!n.float,f=!!n.float,l=void 0,d=void 0;u.fftSize=c,u.smoothingTimeConstant=n.smoothing||n.smoothingTimeConstant||u.smoothingTimeConstant,u.minDecibels=n.minDecibels||u.minDecibels,u.maxDecibels=n.maxDecibels||u.maxDecibels;var p=new Blob(["onmessage=function(e){var data=e.data;var f=new Float32Array(data.b);for(var i=0;i<f.length;i++){data.sum+=f[i]}data.sum/=f.length;postMessage(Math.max(1.0-(data.sum/data.numSamples*-1.0),0))};"]),v=new Blob(["onmessage=function(e){var data=e.data;var sampleRate=data.sampleRate;var buf=new Float32Array(data.b);var SIZE=buf.length;var MAX_SAMPLES=Math.floor(SIZE/2);var best_offset=-1;var best_correlation=0;var rms=0;var foundGoodCorrelation=false;var correlations=new Array(MAX_SAMPLES);for(var i=0;i<SIZE;i++){var val=buf[i];rms+=val*val}rms=Math.sqrt(rms/SIZE);if (rms<0.01){postMessage(-1)}else{var lastCorrelation=1;for(var offset=0;offset<MAX_SAMPLES;offset++){var correlation=0;for(var i=0;i<MAX_SAMPLES;i++){correlation+=Math.abs((buf[i])-(buf[i+offset]))}correlation=1-(correlation/MAX_SAMPLES);correlations[offset]=correlation;if ((correlation>0.9)&&(correlation>lastCorrelation)){foundGoodCorrelation=true;if (correlation>best_correlation){best_correlation=correlation;best_offset=offset}}else if (foundGoodCorrelation){var shift=(correlations[best_offset+1]-correlations[best_offset-1])/correlations[best_offset];postMessage(sampleRate/(best_offset+(8*shift)))}lastCorrelation=correlation}if (best_correlation>0.01){postMessage(sampleRate/best_offset)}else{postMessage(-1)}}};"]),h=URL.createObjectURL(p),m=new Worker(h),g=URL.createObjectURL(v),y=new Worker(g),b=null,w=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],T=null,x={hertz:null,note:null,noteIndex:null,detuneCents:null,detune:null};return m.onmessage=function(e){b&&b(e.data)},y.onmessage=function(e){if(T){var n=e.data;if(n!==-1){var r=t(n),i=o(n,r);x.hertz=n,x.noteIndex=r%12,x.note=w[r%12],x.detuneCents=i,0===i?x.detune="":i<0?x.detune="flat":x.detune="sharp"}T(x)}},u.getWaveform=function(e){return arguments.length||(e=f),i(l,e)&&(c=u.fftSize,f=e,l=a(e,c)),e&&this.getFloatTimeDomainData?this.getFloatTimeDomainData(l):this.getByteTimeDomainData(l),l},u.getPitch=function(n){T=T||n;var t=new Float32Array(u.fftSize);t.set(u.getWaveform(!0)),y.postMessage({sampleRate:e.sampleRate,b:t.buffer},[t.buffer])},u.getFrequencies=function(e){return arguments.length||(e=s),i(d,e)&&(c=u.fftSize,s=e,d=a(e,u.frequencyBinCount)),e?this.getFloatFrequencyData(d):this.getByteFrequencyData(d),d},u.getAmplitude=function(e){b=b||e;var n=new Float32Array(u.fftSize);n.set(u.getFrequencies(!0)),m.postMessage({sum:0,length:n.byteLength,numSamples:u.fftSize/2,b:n.buffer},[n.buffer])},u.update=function(){u.getWaveform(),u.getFrequencies()},Object.defineProperties(u,{smoothing:{get:function(){return u.smoothingTimeConstant},set:function(e){u.smoothingTimeConstant=e}}}),u}function l(e,n){return arguments.length<2&&(n=0),"number"!=typeof e||isNaN(e)?n:e}function d(e,n){n=l(n,1);var t=e.createWaveShaper(),r=new Float32Array(ae);return t.update=function(e){if(n=e,n<=0)return n=0,void(this.curve=null);for(var t=100*e,o=Math.PI/180,i=void 0,a=0;a<ae;a++)i=2*a/ae-1,r[a]=(3+t)*i*20*o/(Math.PI+t*Math.abs(i));this.curve=r},Object.defineProperties(t,{amount:{get:function(){return n},set:function(e){this.update(e)}}}),"undefined"!=typeof n&&t.update(n),t}function p(e,n){n=n||{};var t=e.createGain(),r=e.createDelay(),o=e.createGain(),i=e.createGain();r.delayTime.value=l(n.delayTime,.5),o.gain.value=l(n.feedback,.5),t.connect(r),t.connect(i),r.connect(o),o.connect(r),o.connect(i);var a=t;return a.name="Echo",a._output=i,Object.defineProperties(a,{delay:{get:function(){return r.delayTime.value},set:function(e){r.delayTime.value=e}},feedback:{get:function(){return o.gain.value},set:function(e){o.gain.value=e}}}),a}function v(){function e(){}function n(){return{value:1,defaultValue:1,linearRampToValueAtTime:e,setValueAtTime:e,exponentialRampToValueAtTime:e,setTargetAtTime:e,setValueCurveAtTime:e,cancelScheduledValues:e}}function t(){return{connect:e,disconnect:e,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:e,getByteFrequencyData:e,getFloatTimeDomainData:e,getFloatFrequencyData:e,gain:n(),panningModel:0,setPosition:e,setOrientation:e,setVelocity:e,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:n(),Q:n(),detune:n(),delayTime:n(),buffer:0,threshold:n(),knee:n(),ratio:n(),attack:n(),release:n(),reduction:n(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:e,copyToChannel:e,dopplerFactor:0,speedOfSound:0,start:e}}var r=Date.now();return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:t,createBuffer:t,createBiquadFilter:t,createChannelMerger:t,createChannelSplitter:t,createDynamicsCompressor:t,createConvolver:t,createDelay:t,createGain:t,createOscillator:t,createPanner:t,createScriptProcessor:t,createWaveShaper:t,listener:t(),get currentTime(){return(Date.now()-r)/1e3}}}function h(e){function n(e){var n=Math.log(o/r)/Math.LN2,t=Math.pow(2,n*(e-1));return o*t}var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=40,o=e.sampleRate/2,i=e.createBiquadFilter();return i.type=t.type,i.set=function(e,n,t){return"undefined"!=typeof e&&"number"==typeof e&&(i.frequency.value=e),"undefined"!=typeof n&&"number"==typeof n&&(i.Q.value=n),"undefined"!=typeof t&&"number"==typeof t&&(i.gain.value=t),i},i.setByPercent=function(e,t,r){return i.set(n(e),t,r)},i.set(t.frequency,t.q,t.gain)}function m(e,n){var t=e.createGain(),r=e.createDelay(),o=e.createGain(),i=e.createOscillator(),a=e.createGain(),u=e.createGain();r.delayTime.value=l(n.delay,.005),o.gain.value=l(n.feedback,.5),i.type="sine",i.frequency.value=l(n.frequency,.002),a.gain.value=l(n.gain,.25),t.connect(u),t.connect(r),r.connect(u),r.connect(o),o.connect(t),i.connect(a),a.connect(r.delayTime),i.start(0);var c=t;return c.name="Flanger",c._output=u,Object.defineProperties(c,{delay:{get:function(){return r.delayTime.value},set:function(e){r.delayTime.value=e}},lfoFrequency:{get:function(){return i.frequency.value},set:function(e){i.frequency.value=e}},lfoGain:{get:function(){return a.gain.value},set:function(e){a.gain.value=e}},feedback:{get:function(){return o.gain.value},set:function(e){o.gain.value=e}}}),c}function g(e,n){var t=e.createGain(),r=e.createChannelSplitter(2),o=e.createChannelMerger(2),i=e.createGain(),a=e.createGain(),u=e.createOscillator(),c=e.createGain(),s=e.createGain(),f=e.createDelay(),d=e.createDelay(),p=e.createGain();i.gain.value=a.gain.value=l(n.feedback,.5),f.delayTime.value=d.delayTime.value=l(n.delay,.003),u.type="sine",u.frequency.value=l(n.frequency,.5),c.gain.value=l(n.gain,.005),s.gain.value=0-c.gain.value,t.connect(r),r.connect(f,0),r.connect(d,1),f.connect(i),d.connect(a),i.connect(d),a.connect(f),f.connect(o,0,0),d.connect(o,0,1),o.connect(p),t.connect(p),u.connect(c),u.connect(s),c.connect(f.delayTime),s.connect(d.delayTime),u.start(0);var v=t;return v.name="StereoFlanger",v._output=p,Object.defineProperties(v,{delay:{get:function(){return f.delayTime.value},set:function(e){f.delayTime.value=d.delayTime.value=e}},lfoFrequency:{get:function(){return u.frequency.value},set:function(e){u.frequency.value=e}},lfoGain:{get:function(){return c.gain.value},set:function(e){c.gain.value=s.gain.value=e}},feedback:{get:function(){return i.gain.value},set:function(e){i.gain.value=a.gain.value=e}}}),v}function y(e,n){return n=n||{},n.stereo?new g(e,n):new m(e,n)}function b(e){function n(e,n){var t=e.x,r=e.y,o=e.z,i=n.x,a=n.y,u=n.z;e.x=r*u-o*a,e.y=o*i-t*u,e.z=t*a-r*i}function t(e){if(0===e.x&&0===e.y&&0===e.z)return e;var n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),t=1/n;return e.x*=t,e.y*=t,e.z*=t,e}function r(e,r){var o=a.get(r.x,r.y,r.z);n(o,u),n(o,r),t(o),t(r),e.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z),a.dispose(r),a.dispose(o)}function o(e,n){e.setPosition(n.x,n.y,n.z),a.dispose(n)}var i=e.createPanner();i.panningModel=b.defaults.panningModel,i.distanceModel=b.defaults.distanceModel,i.refDistance=b.defaults.refDistance,i.maxDistance=b.defaults.maxDistance,i.rolloffFactor=b.defaults.rolloffFactor,i.coneInnerAngle=b.defaults.coneInnerAngle,i.coneOuterAngle=b.defaults.coneOuterAngle,i.coneOuterGain=b.defaults.coneOuterGain,i.setPosition(0,0,1),i.setOrientation(0,0,0);var a={pool:[],get:function(e,n,t){var r=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return"undefined"!=typeof e&&isNaN(e)&&"x"in e&&"y"in e&&"z"in e?(r.x=l(e.x),r.y=l(e.y),r.z=l(e.z)):(r.x=l(e),r.y=l(n),r.z=l(t)),r},dispose:function(e){this.pool.push(e)}},u=a.get(0,1,0),c=Math.PI/4,s=Math.PI/2;return i.set=function(e,n,t){var r=a.get(e,n,t);1===arguments.length&&r.x&&(e=r.x,e>1&&(e=1),e<-1&&(e=-1),e*=c,t=e+s,t>s&&(t=Math.PI-t),r.x=Math.sin(e),r.z=Math.sin(t)),o(i,r)},i.setSourcePosition=function(e,n,t){o(i,a.get(e,n,t))},i.setSourceOrientation=function(e,n,t){r(i,a.get(e,n,t))},i.setListenerPosition=function(n,t,r){o(e.listener,a.get(n,t,r))},i.setListenerOrientation=function(n,t,o){r(e.listener,a.get(n,t,o))},i.getDefaults=function(){return b.defaults},i.setDefaults=function(e){Object.keys(e).forEach(function(n){b.defaults[n]=e[n]})},i}function w(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=l(n.stages,8),r=[],o=void 0,i=e.createGain(),a=e.createGain(),u=e.createOscillator(),c=e.createGain(),s=e.createGain();a.gain.value=l(n.feedback,.5),u.type="sine",u.frequency.value=l(n.frequency,.5),c.gain.value=l(n.gain,300);for(var f=0;f<t;f++)o=e.createBiquadFilter(),o.type="allpass",o.frequency.value=1e3*f,f>0&&r[f-1].connect(o),c.connect(o.frequency),r.push(o);var d=r[0],p=r[r.length-1];i.connect(d),i.connect(s),p.connect(s),p.connect(a),a.connect(d),u.connect(c),u.start(0);var v=i;return v.name="Phaser",v._output=s,Object.defineProperties(v,{lfoFrequency:{get:function(){return u.frequency.value},set:function(e){u.frequency.value=e}},lfoGain:{get:function(){return c.gain.value},set:function(e){c.gain.value=e}},feedback:{get:function(){return a.gain.value},set:function(e){a.gain.value=e}}}),v}function T(e,n){function t(e,n){for(var t=new Float32Array(n),r=0,o=0;o<e.length;o++)t.set(e[o],r),r+=e[o].length;return t}function r(){if(!u.length)return e.createBuffer(2,a,e.sampleRate);var n=u.length*a,r=e.createBuffer(2,n,e.sampleRate);return r.getChannelData(0).set(t(u,n)),r.getChannelData(1).set(t(c,n)),r}function o(){p&&(p.onaudioprocess=null,l.disconnect(),p.disconnect())}function i(){o(),p=e.createScriptProcessor(a,2,2),l.connect(p),p.connect(e.destination),p.connect(d),p.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0),r=e.inputBuffer.getChannelData(1);if(n){var o=e.outputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(1);o.set(t),i.set(r)}v.isRecording&&(u.push(new Float32Array(t)),c.push(new Float32Array(r)))}}var a=4096,u=[],c=[],s=0,f=0,l=e.createGain(),d=e.createGain(),p=void 0,v=l;return v.name="Recorder",v._output=d,v.isRecording=!1,v.start=function(){i(),u.length=0,c.length=0,s=e.currentTime,f=0,this.isRecording=!0},v.stop=function(){return f=e.currentTime,this.isRecording=!1,o(),r()},v.getDuration=function(){return this.isRecording?e.currentTime-s:f-s},v}function x(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=e.sampleRate,r=l(n.time,1),o=l(n.decay,5),i=!!n.reverse,a=void 0,u=void 0,c=e.createGain(),s=e.createConvolver(),f=e.createGain();c.connect(s),c.connect(f),s.connect(f);var d=c;return d.name="Reverb",d._output=f,d.update=function(n){if("undefined"!=typeof n.time&&(r=n.time,a=Math.floor(t*r),u=a?e.createBuffer(2,a,t):null),"undefined"!=typeof n.decay&&(o=n.decay),"undefined"!=typeof n.reverse&&(i=n.reverse),!u)return void(s.buffer=null);for(var c=u.getChannelData(0),f=u.getChannelData(1),l=void 0,d=void 0,p=0;p<a;p++)l=i?a-p:p,d=Math.pow(1-l/a,o),c[p]=(2*Math.random()-1)*d,f[p]=(2*Math.random()-1)*d;s.buffer=u},d.update({time:r,decay:o,reverse:i}),Object.defineProperties(d,{time:{get:function(){return r},set:function(e){e!==r&&this.update({time:e})}},decay:{get:function(){return o},set:function(e){e!==o&&this.update({decay:e})}},reverse:{get:function(){return i},set:function(e){e!==i&&this.update({reverse:!!e})}}}),d}function S(e){function n(e,n){var t=e._output||e;t.disconnect(),t.connect(n)}function t(e){var t=X.length,r=t?X[t-1]:Z;r&&n(r,e),W=e}function r(){if(Z){for(var e=void 0,r=void 0,o=0;o<X.length;o++)e=X[o],r=0===o?Z:X[o-1],n(r,e);W&&t(W)}}function o(e){return!!e&&X.indexOf(e)>-1}function i(e){return e?o(e)?e:(X.push(e),r(),e):null}function a(e){if(!e)return null;if(!o(e))return e;for(var n=X.length,t=0;t<n;t++)if(e===X[t]){X.splice(t,1);break}var i=e._output||e;return i.disconnect(),r(),e}function u(e,n){n=!!n;var t=o(e);return arguments.length>1&&t===n?H:(t?a(e):i(e),H)}function c(){for(;X.length;)X.pop().disconnect();return r(),H}function s(){c(),e=null,W=null,X=[],Z&&Z.disconnect(),Z=null}function l(n){return i(new f(e,n))}function m(n){var t=e.createDynamicsCompressor();return t.update=function(e){t.threshold.value="undefined"!=typeof e.threshold?e.threshold:-24,t.knee.value="undefined"!=typeof e.knee?e.knee:30,t.ratio.value="undefined"!=typeof e.ratio?e.ratio:12,t.attack.value="undefined"!=typeof e.attack?e.attack:3e-4,t.release.value="undefined"!=typeof e.release?e.release:.25},t.update(n||{}),i(t)}function g(n){var t=e.createConvolver();return t.buffer=n,i(t)}function S(n){var t=e.createDelay();return"undefined"!=typeof n&&(t.delayTime.value=n),i(t)}function C(n){return i(new p(e,n))}function A(n){return i(new d(e,n))}function E(n,t,r,o){return i(new h(e,{type:n,frequency:t,q:r,gain:o}))}function M(e,n){return E("lowpass",{frequency:e,q:n})}function O(e,n){return E("highpass",{frequency:e,q:n})}function _(e,n){return E("bandpass",{frequency:e,q:n})}function L(e,n){return E("lowshelf",{frequency:e,q:0,gain:n})}function k(e,n){return E("highshelf",{frequency:e,q:0,gain:n})}function q(e,n,t){return E("peaking",{frequency:e,q:n,gain:t})}function P(e,n,t){return E("notch",{frequency:e,q:n,gain:t})}function D(e,n){return E("allpass",{frequency:e,q:n})}function F(n){return i(new y(e,n))}function R(n){var t=e.createGain();return"undefined"!=typeof n&&(t.gain.value=n),t}function z(){return i(new b(e))}function j(n){return i(new w(e,n))}function B(n){return i(new T(e,n))}function N(n,t,r){return i(new x(e,n,t,r))}function G(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=n.bufferSize||1024,r="undefined"==typeof n.inputChannels?0:n.inputChannels,o="undefined"==typeof n.outputChannels?1:n.outputChannels,a=e.createScriptProcessor(t,r,o),u=n.thisArg||n.context||a,c=n.callback||function(){};return a.onaudioprocess=c.bind(u),i(a)}function U(e){return Z=e,r(),e}function V(e){return t(e),e}e=e||new v;var I=new b(e),H=null,W=void 0,X=[],Z=void 0;return H={context:e,nodeList:X,panning:I,has:o,add:i,remove:a,toggle:u,removeAll:c,destroy:s,setSource:U,setDestination:V,analyser:l,compressor:m,convolver:g,delay:S,echo:C,distortion:A,filter:E,lowpass:M,highpass:O,bandpass:_,lowshelf:L,highshelf:k,peaking:q,notch:P,allpass:D,flanger:F,gain:R,panner:z,phaser:j,recorder:B,reverb:N,script:G},Object.freeze(H)}function C(e,n){function t(e,n){var t=void 0;return e||0===e?(g.some(function(n){return(n===e||n.id===e)&&(t=n,!0)}),t&&n?n(t):t):t}function r(e){return t(e,function(e){return g.splice(g.indexOf(e),1)}),T}function o(e){return e.gain.disconnect(),e.gain.connect(b),g.push(e),e.once("destroy",r),T}function i(e,n){return g.forEach(function(t){return t.play(e,n)}),T}function a(){return g.forEach(function(e){e.playing&&e.pause()}),T}function u(){return g.forEach(function(e){e.paused&&e.play()}),T}function c(){return g.forEach(function(e){return e.stop()}),T}function s(e){return g.forEach(function(n){return n.seek(e)}),T}function f(){return w=T.volume,T.volume=0,T}function l(){return T.volume=w||1,T}function d(e){return T.volume=e,T}function p(n,t){if(e){var r=b.gain,o=e.currentTime;r.cancelScheduledValues(o),r.setValueAtTime(r.value,o),r.linearRampToValueAtTime(n,o+t)}else g.forEach(function(e){return e.fade(n,t)});return T}function v(){g.forEach(function(e){return e.load(null,!0)})}function h(){g.forEach(function(e){return e.unload()})}function m(){for(;g.length;)g.pop().destroy()}var g=[],y=new S(e),b=y.gain(),w=1,T=null;return e&&(y.setSource(b),y.setDestination(n||e.destination)),T={add:o,find:t,remove:r,play:i,pause:a,resume:u,stop:c,seek:s,setVolume:d,mute:f,unMute:l,fade:p,load:v,unload:h,destroy:m},Object.defineProperties(T,{effect:{value:y},gain:{value:b},sounds:{value:g},volume:{get:function(){return b.gain.value},set:function(n){isNaN(n)||(n=Math.min(Math.max(n,0),1),e?(b.gain.cancelScheduledValues(e.currentTime),b.gain.value=n,b.gain.setValueAtTime(n,e.currentTime)):b.gain.value=n,g.forEach(function(e){e.context||(e.groupVolume=n)}))}}}),T}function A(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function E(e){return"function"==typeof e}function M(e){return"number"==typeof e}function O(e){return"object"==typeof e&&null!==e}function _(e){return void 0===e}function L(e,n){function t(){m.off("error"),m.off("progress"),m.off("complete"),m.off("loaded"),x&&"function"==typeof x.removeEventListener&&(x.removeEventListener("canplaythrough",c),x.removeEventListener("error",i)),w&&(w.removeEventListener("progress",o),w.removeEventListener("load",u),w.removeEventListener("error",i))}function r(e){m.emit("progress",1),m.emit("loaded",e),m.emit("complete",e),t()}function o(e){e.lengthComputable&&(g=e.loaded/e.total,m.emit("progress",g))}function i(n){window.clearTimeout(T);var r=n;x&&x.error&&(r="Media Error: "+h[x.error.code]+" "+e),w&&(r="XHR Error: "+w.status+" "+w.statusText+" "+e),m.emit("error",r),t()}function a(e){y.decodeAudioData(e,function(e){x=e,w=null,g=1,r(e)},i)}function u(){a(w.response)}function c(){window.clearTimeout(T),x&&(g=1,
r(x))}function s(){t(),w&&4!==w.readyState&&w.abort(),w=null,window.clearTimeout(T)}function f(){s(),w=null,x=null,y=null}function l(){return e instanceof window.ArrayBuffer?void a(e):(w=new XMLHttpRequest,w.open("GET",e,!0),w.responseType="arraybuffer",w.addEventListener("progress",o),w.addEventListener("load",u),w.addEventListener("error",i),void w.send())}function d(){x&&x.tagName||(x=document.createElement("audio")),b||(window.clearTimeout(T),T=window.setTimeout(c,2e3),x.addEventListener("canplaythrough",c,!1)),x.addEventListener("error",i,!1),x.preload="auto",x.src=e,x.load(),b&&r(x)}function p(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];n&&!e||(y?l():d())}function v(n){e=n,p()}var h=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],m=new se,g=0,y=void 0,b=void 0,w=void 0,T=void 0,x=void 0,S={on:m.on.bind(m),once:m.once.bind(m),off:m.off.bind(m),load:v,start:p,cancel:s,destroy:f};return Object.defineProperties(S,{data:{get:function(){return x}},progress:{get:function(){return g}},audioContext:{set:function(e){y=e}},isTouchLocked:{set:function(e){b=e}}}),Object.freeze(S)}function k(e,n,t){function r(){return!g&&n&&(g=n.createBufferSource(),g.buffer=e),g}function o(){if(g){g.onended=null;try{g.disconnect(),g.stop(0)}catch(e){}g=null}p=!1,v=0,m=!1,y=0}function i(){var e=n.currentTime-y;o(),v=e,m=!1,p=!0}function a(){o(),f=!0,"function"==typeof l&&l(s)}function u(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(!m){for(e=e?n.currentTime+e:0,t&&(v=0),v&&(t=v);t>s.duration;)t%=s.duration;r(),g.onended=a,g.start(e,t),g.loop=d,g.playbackRate.value=h,y=n.currentTime-t,f=!1,p=!1,v=0,m=!0}}function c(){o(),e=null,n=null,l=null,g=null}var s={},f=!1,l=t,d=!1,p=!1,v=0,h=1,m=!1,g=null,y=0;return Object.defineProperties(s,{play:{value:u},pause:{value:i},stop:{value:o},destroy:{value:c},currentTime:{get:function(){if(v)return v;if(y){var e=n.currentTime-y;return e>s.duration&&(e%=s.duration),e}return 0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return f}},loop:{get:function(){return d},set:function(e){d=!!e,g&&(g.loop=d)}},paused:{get:function(){return p}},playbackRate:{get:function(){return h},set:function(e){h=e,g&&(g.playbackRate.value=h)}},playing:{get:function(){return m}},progress:{get:function(){return s.duration?s.currentTime/s.duration:0}},sourceNode:{get:function(){return r()}}}),Object.freeze(s)}function q(e,n,t){function r(){return!T&&n&&(T=n.createMediaElementSource(e)),T}function o(n){e.src=n,e.load(),p=!1,y=!1,w=!1}function i(){e.removeEventListener("canplaythrough",i),w&&e.play()}function a(){return g?(e.currentTime=0,e.currentTime>0&&e.load(),void e.play()):(p=!0,y=!1,w=!1,void("function"==typeof v&&v(d)))}function u(n,t){clearTimeout(h),e.volume=S*x,e.playbackRate=b,t&&(e.currentTime=t),n?h=setTimeout(u,n):e.play(),p=!1,y=!1,w=!0,e.removeEventListener("ended",a),e.addEventListener("ended",a,!1),e.readyState<1&&(e.removeEventListener("canplaythrough",i),e.addEventListener("canplaythrough",i,!1),e.load(),e.play())}function c(){clearTimeout(h),e&&(e.pause(),w=!1,y=!0)}function s(){if(clearTimeout(h),e){e.pause();try{e.currentTime=0,e.currentTime>0&&e.load()}catch(e){}w=!1,y=!1}}function f(e,t){function r(e,n){m=window.setTimeout(function(){return d.volume=d.volume+.2*(e-d.volume),Math.abs(d.volume-e)>.05?void r(e,n):void(d.volume=e)},1e3*n)}return n?d:(window.clearTimeout(m),r(e,t/10),d)}function l(){e.removeEventListener("ended",a),e.removeEventListener("canplaythrough",i),s(),e=null,n=null,v=null,T=null}var d={},p=!1,v=t,h=void 0,m=void 0,g=!1,y=!1,b=1,w=!1,T=null,x=1,S=1;return Object.defineProperties(d,{play:{value:u},pause:{value:c},stop:{value:s},load:{value:o},fade:{value:f},destroy:{value:l},currentTime:{get:function(){return e?e.currentTime:0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return p}},loop:{get:function(){return g},set:function(e){g=!!e}},paused:{get:function(){return y}},playbackRate:{get:function(){return b},set:function(n){b=n,e&&(e.playbackRate=b)}},playing:{get:function(){return w}},progress:{get:function(){return e&&e.duration?e.currentTime/e.duration:0}},sourceNode:{get:function(){return r()}},volume:{get:function(){return S},set:function(n){window.clearTimeout(m),S=n,e&&(e.volume=S*x)}},groupVolume:{get:function(){return x},set:function(n){x=n,e&&(e.volume=S*x)}}}),Object.freeze(d)}function P(e,n){function t(){return!l&&n&&(l=n.createMediaStreamSource(e),navigator.mozGetUserMedia&&(window.mozHack=l)),l}function r(e){e=e?n.currentTime+e:0,t(),l.start(e),d=n.currentTime-s,u=!1,f=!0,c=!1,s=0}function o(){if(l){try{l.stop(0)}catch(e){}l=null}u=!0,c=!1,s=0,f=!1,d=0}function i(){var e=n.currentTime-d;o(),s=e,f=!1,c=!0}function a(){o(),n=null,l=null,e=null,window.mozHack=null}var u=!1,c=!1,s=0,f=!1,l=null,d=0,p={play:r,pause:i,stop:o,destroy:a,duration:0,progress:0};return Object.defineProperties(p,{currentTime:{get:function(){return s?s:d?n.currentTime-d:0}},ended:{get:function(){return u}},paused:{get:function(){return c}},playing:{get:function(){return f}},sourceNode:{get:function(){return t()}}}),Object.freeze(p)}function D(e,n){function t(){return!l&&n&&(l=n.createOscillator(),l.type=e,l.frequency.value=p),l}function r(e){e=e||0,e&&(e=n.currentTime+e),t(),l.start(e),d=s?n.currentTime-s:n.currentTime,u=!1,f=!0,c=!1,s=0}function o(){if(l){try{l.stop(0)}catch(e){}l=null}u=!0,c=!1,s=0,f=!1,d=0}function i(){var e=n.currentTime-d;o(),s=e,f=!1,c=!0}function a(){o(),n=null,l=null}var u=!1,c=!1,s=0,f=!1,l=null,d=0,p=200,v=null;return v={play:r,pause:i,stop:o,destroy:a},Object.defineProperties(v,{currentTime:{get:function(){return s?s:d?n.currentTime-d:0}},duration:{value:0},ended:{get:function(){return u}},frequency:{get:function(){return p},set:function(e){p=e,l&&(l.frequency.value=e)}},paused:{get:function(){return c}},playing:{get:function(){return f}},progress:{value:0},sourceNode:{get:function(){return t()}}}),Object.freeze(v)}function F(e,n){function t(){return!h&&n&&(h=n.createScriptProcessor(c,0,s)),h}function r(){t(),h.onaudioprocess=l,m=n.currentTime-p,f=!1,d=!1,p=0,v=!0}function o(e){for(var n=e.outputBuffer,t=0;t<n.numberOfChannels;t++)for(var r=n.getChannelData(t),o=0;o<r.length;o++)r[o]=0}function i(){h&&(h.onaudioprocess=o),f=!0,d=!1,p=0,v=!1,m=0}function a(){var e=n.currentTime-m;i(),p=e,v=!1,d=!0}function u(){i(),n=null,l=null,h=null}var c=e.bufferSize||1024,s=e.channels||1,f=!1,l=e.callback.bind(e.thisArg||this),d=!1,p=0,v=!1,h=null,m=0,g=null;return g={play:r,pause:a,stop:i,destroy:u,duration:0,progress:0},Object.defineProperties(g,{currentTime:{get:function(){return p?p:m?n.currentTime-m:0}},ended:{get:function(){return f}},paused:{get:function(){return d}},playing:{get:function(){return v}},sourceNode:{get:function(){return t()}}}),Object.freeze(g)}function R(){var e=void 0,n=void 0;return function(t,r){if(!window.Float32Array||!window.AudioBuffer)return[];var o=e===t,i=n&&n.length===r;if(o&&i)return n;if(n&&n.length===r||(n=new Float32Array(r)),!t)return n;e=t;for(var a=Math.floor(e.length/r),u=5,c=Math.max(Math.floor(a/u),1),s=0,f=0;f<e.numberOfChannels;f++)for(var l=e.getChannelData(f),d=0;d<r;d++)for(var p=d*a,v=p+a;p<v;p+=c){var h=l[p];h<0&&(h=-h),h>n[d]&&(n[d]=h),h>s&&(s=h)}for(var m=1/s,g=0;g<n.length;g++)n[g]*=m;return n}}function z(e){function n(e){if(b=e,ie.isAudioBuffer(b))E=new k(b,p,function(){return M.emit("ended",M)});else if(ie.isMediaElement(b))E=new q(b,p,function(){return M.emit("ended",M)});else if(ie.isMediaStream(b))E=new P(b,p);else if(ie.isOscillatorType(b&&b.type||b))E=new D(b.type||b,p);else{if(!ie.isScriptConfig(b))throw new Error("Cannot detect data type: "+b);E=new F(b,p)}h.setSource(E.sourceNode),M.emit("ready",M),A&&A()}function t(e){n(e),M.emit("loaded",M)}function r(e){M.emit("error",M,e)}function o(){var n=arguments.length<=0||void 0===arguments[0]?null:arguments[0],o=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=!o&&!E&&!!e.deferLoad;if(n){var a=ie.getSupportedFile(e.src||e.url||e.data||e)||e.src;e=Object.assign(e,n,{src:a})}return E&&b&&b.tagName?E.load(e.src):(T=T||new L(e.src,i),T.audioContext=e.asMediaElement?null:p,T.isTouchLocked=w,T.off("loaded",t),T.once("loaded",t),T.off("error",r),T.on("error",r)),M}function i(n,t){return!E||w?(A=function(){E&&i(n,t)},e.deferLoad&&(T||o(null,!0),T.start(!0)),M):(A=null,h.setSource(E.sourceNode),p||(M.volume=m.gain.value),E.play(n,t),E.hasOwnProperty("loop")&&(E.loop=x),M.emit("play",M),M)}function a(){return E&&E.pause(),M.emit("pause",M),M}function u(e){return E&&E.stop(e||0),M.emit("stop",M),M}function c(e){return E&&(E.stop(),i(0,E.duration*e)),M}function s(e,n){if(!E)return M;var t=m.gain;if(p){var r=p.currentTime;t.cancelScheduledValues(r),t.setValueAtTime(t.value,r),t.linearRampToValueAtTime(e,r+n)}else"function"==typeof E.fade&&(E.fade(e,n),t.value=e);return M.emit("fade",M,e),M}function f(){E&&E.destroy(),T&&T.destroy(),b=null,A=null,E=null,T=null,e.deferLoad=!0,M.emit("unload",M)}function l(){o(null,!0)}function d(){E&&E.destroy(),h&&h.destroy(),m&&m.disconnect(),T&&T.off("loaded"),T&&T.off("error"),T&&T.destroy(),M.off("loaded"),M.off("ended"),M.off("error"),m=null,p=null,v=null,b=null,A=null,E=null,h=null,T=null,g=null,e=null,M.emit("destroy",M),M.off("destroy")}var p=e.context,v=e.destination,h=new S(p),m=h.gain(),g=R(),y=null,b=null,w=!1,T=null,x=!1,C=1,A=null,E=null,M=null;return p&&(h.setDestination(m),m.connect(v||p.destination)),M=Object.create(se.prototype,{_events:{value:{}},constructor:{value:z},play:{value:i},pause:{value:a},load:{value:o},seek:{value:c},stop:{value:u},fade:{value:s},unload:{value:f},reload:{value:l},destroy:{value:d},context:{value:p},currentTime:{get:function(){return E?E.currentTime:0},set:function(e){E&&E.stop(),i(0,e)}},data:{get:function(){return b},set:function(e){e&&n(e)}},duration:{get:function(){return E?E.duration:0}},effect:{value:h},ended:{get:function(){return!!E&&E.ended}},frequency:{get:function(){return E?E.frequency:0},set:function(e){E&&E.hasOwnProperty("frequency")&&(E.frequency=e)}},gain:{value:m},id:{get:function(){return y},set:function(e){y=e}},isTouchLocked:{set:function(e){w=e,T&&(T.isTouchLocked=e),!e&&A&&A()}},loader:{get:function(){return T}},loop:{get:function(){return x},set:function(e){x=!!e,E&&E.hasOwnProperty("loop")&&E.loop!==x&&(E.loop=x)}},config:{get:function(){return e}},paused:{get:function(){return!!E&&E.paused}},playing:{get:function(){return!!E&&E.playing}},playbackRate:{get:function(){return C},set:function(e){C=e,E&&(E.playbackRate=C)}},progress:{get:function(){return E?E.progress:0}},sourceNode:{get:function(){return E?E.sourceNode:null}},volume:{get:function(){return p?m.gain.value:E&&E.hasOwnProperty("volume")?E.volume:1},set:function(e){if(!isNaN(e)){e=Math.min(Math.max(e,0),1);var n=m.gain;if(p){var t=p.currentTime;n.cancelScheduledValues(t),n.value=e,n.setValueAtTime(e,t)}else n.value=e,E&&E.hasOwnProperty("volume")&&(E.volume=e)}}},groupVolume:{get:function(){return E.groupVolume},set:function(e){E&&E.hasOwnProperty("groupVolume")&&(E.groupVolume=e)}},waveform:{value:function(e){return b||M.once("ready",function(){return g(b,e)}),g(b,e)}},userData:{value:{}}})}function j(e,n){function t(){o.length&&(u=o.slice(0).sort(function(e,n){return n.duration-e.duration})[0])}var r=new C(e,n),o=r.sounds,i=1,a=!1,u=void 0,c=r.add;r.add=function(e){return c(e),t(),r};var s=r.rmeove;return r.remove=function(e){return s(e),t(),r},Object.defineProperties(r,{currentTime:{get:function(){return u?u.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},duration:{get:function(){return u?u.duration:0}},loop:{get:function(){return a},set:function(e){a=!!e,o.forEach(function(e){e.loop=a})}},paused:{get:function(){return!!u&&u.paused}},progress:{get:function(){return u?u.progress:0}},playbackRate:{get:function(){return i},set:function(e){i=e,o.forEach(function(e){e.playbackRate=i})}},playing:{get:function(){return!!u&&u.playing}}}),r}function B(e,n,t){function r(){return i?(navigator.getUserMedia({audio:!0},function(n){u=n,e(u)},function(e){n&&"PermissionDeniedError"===e.name||"PERMISSION_DENIED"===e?n():t(e.message||e)}),a):a}function o(){return u&&(u.stop(),u=null),a}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t=t||function(){};var i=!!navigator.getUserMedia,a={},u=null;return Object.defineProperties(a,{connect:{value:r},disconnect:{value:o},isSupported:{value:i},stream:{get:function(){return u}}}),Object.freeze(a)}function N(e){function n(){s?(y.fillStyle=s,y.fillRect(d,p,m,g)):y.clearRect(d,p,m,g),y.lineWidth=f,b=null,"function"!=typeof c&&(y.strokeStyle=c,y.beginPath())}function t(e,n,t){if("function"==typeof c){var r=c(e,n,t);r!==b&&(b=r,y.stroke(),y.strokeStyle=b,y.beginPath())}}function r(e,n,t){return"function"==typeof v?v(e,n,t):e}function o(n,t){return n&&"function"==typeof n.waveform?n.waveform(t):n?n:e.waveform?e.waveform:e.sound?e.sound.waveform(t):null}function i(e){if(n(),"circular"===u){var i=o(e,360),c=Math.floor(i.length*l),s=le/c,v=void 0,h=void 0,b=void 0,M=void 0;for(w=0;w<c;w++){var O=r(i[w],w,c);t(w,c,O),v=w*s-fe,M=Math.cos(v),b=Math.sin(v),"fill"===a&&(T=A+C*M,x=E+C*b,y.moveTo(T,x)),h=C+(S-C)*O,T=A+h*M,x=E+h*b,"line"===a&&0===w&&y.moveTo(T,x),y.lineTo(T,x)}"line"===a&&y.closePath()}else{var _=o(e,m),L=Math.min(_.length,m-f/2);for(L=Math.floor(L*l),w=0;w<L;w++){var k=r(_[w],w,L);t(w,L,k),"line"===a&&w>0&&y.lineTo(T,x),T=d+w,x=p+g-Math.round(g*k),x=Math.floor(Math.min(x,p+g-f/2)),"fill"===a?(y.moveTo(T,x),y.lineTo(T,p+g)):y.lineTo(T,x)}}y.stroke()}var a=e.style||"fill",u=e.shape||"linear",c=e.color||0,s=e.bgColor,f=e.lineWidth||1,l=e.percent||1,d=e.x||0,p=e.y||0,v=e.transform,h=e.canvas,m=e.width||h&&h.width,g=e.height||h&&h.height,y=null,b=void 0,w=void 0,T=void 0,x=void 0,S=void 0,C=void 0,A=void 0,E=void 0;return h||e.context||(h=document.createElement("canvas"),m=m||h.width,g=g||h.height,h.width=g,h.height=g),"circular"===u&&(S=e.radius||Math.min(g/2,m/2),C=e.innerRadius||S/2,A=d+m/2,E=p+g/2),y=e.context||h.getContext("2d"),i.canvas=h,(e.waveform||e.sound)&&i(),i}function G(){if(de)return de;var e=44100,n=window.AudioContext||window.webkitAudioContext;if(de=n?new n:null,/(iPhone|iPad)/i.test(navigator.userAgent)&&de.sampleRate!==e){var t=de.createBuffer(1,1,e),r=de.createBufferSource();r.buffer=t,r.connect(de.destination),r.start(0),r.disconnect(),de.close(),de=n?new n:null}var o=de&&"suspended"===de.state;return o&&"function"==typeof de.resume&&window.setTimeout(function(){de.resume()},1e3),de}function U(e,n,t){if(pe)return pe;e=e||2,t=t||44100,n=t||e;var r=window.OfflineAudioContext||window.webkitOfflineAudioContext;return pe=r?new r(e,n,t):null}function V(e){if(!de)return e;for(var n=e.numberOfChannels,t=de.createBuffer(n,e.length,e.sampleRate),r=0;r<n;r++)t.getChannelData(r).set(e.getChannelData(r));return t}function I(e){for(var n=e.numberOfChannels,t=0;t<n;t++)Array.prototype.reverse.call(e.getChannelData(t));return e}function H(e,n,t,r,o){de&&(e.setValueAtTime(n,de.currentTime),o?e.linearRampToValueAtTime(t,de.currentTime+r):e.exponentialRampToValueAtTime(t,de.currentTime+r))}function W(e){if(!de)return 0;var n=40,t=de.sampleRate/2,r=Math.log(t/n)/Math.LN2,o=Math.pow(2,r*(e-1));return t*o}function X(e,n,t){return new B(e,n,t)}function Z(e){var n=arguments.length<=1||void 0===arguments[1]?":":arguments[1],t=Math.floor(e/60),r=Math.floor(e%3600%60),o=(t<10?"0"+t:t)+n,i=r<10?"0"+r:r;return o+i}function $(){function e(e){return T.find(e)}function n(e){var n=new j(b,T.gain);return e&&e.forEach(function(e){return n.add(e)}),n}function t(e){var n=e&&e.webAudio===!1?null:b,t=ie.getSupportedFile(e.src||e.url||e.data||e),r=new z(Object.assign({},e||{},{src:t,context:n,destination:T.gain}));return r.isTouchLocked=S,e&&(r.id=e.id||e.name||"",r.loop=!!e.loop,r.volume=e.volume),T.add(r),r}function r(e,n){var r=t(e).load();return n&&n.add(r.loader),r}function o(e){var n=e.src||e.url||e.data||e,t=void 0,o=void 0;if(ie.containsURL(n))t=r(e),o=t.loader;else{if(!Array.isArray(n)||!ie.containsURL(n[0].src||n[0].url)){var i="sono.load: No audio file URLs found in config.";if(!e.onError)throw new Error(i);return e.onError("[ERROR] "+i),null}t=[],o=new L.Group,n.forEach(function(e){return t.push(r(e,o))})}return e.onProgress&&o.on("progress",function(n){return e.onProgress(n)}),e.onComplete&&o.once("complete",function(){o.off("progress"),e.onComplete(t)}),o.once("error",function(n){o.off("error"),e.onError&&e.onError(n)}),o.start(),t}function i(e){if(ie.containsURL(e))return o(e);var n=t(e);return n.data=e.data||e,n}function a(e){return T.find(e,function(e){return e.destroy()}),x}function u(){return T.destroy(),x}function c(){return T.mute(),x}function s(){return T.unMute(),x}function f(e,n){return T.fade(e,n),x}function l(){return T.pause(),x}function d(){return T.resume(),x}function p(){return T.stop(),x}function v(e,n,t){return T.find(e,function(e){return e.play(n,t)}),x}function h(e){return T.find(e,function(e){return e.pause()}),x}function m(e){return T.find(e,function(e){return e.stop()}),x}function g(){var e="sono "+y,n="Supported:"+x.isSupported+" WebAudioAPI:"+x.hasWebAudio+" TouchLocked:"+S+" State:"+(b&&b.state)+" Extensions:"+ie.extensions;if(navigator.userAgent.indexOf("Chrome")>-1){var t=["%c ♫ "+e+" ♫ %c "+n+" ","color: #FFFFFF; background: #379F7A","color: #1F1C0D; background: #E0FBAC"];console.log.apply(console,t)}else window.console&&window.console.log.call&&console.log.call(console,e+" "+n)}var y="0.1.85",b=ve.getContext(),w=b?b.destination:null,T=new C(b,w),x=null,S=!1;return S=J.handleTouchLock(b,function(){S=!1,T.sounds.forEach(function(e){return e.isTouchLocked=!1})}),function(){function e(){T.sounds.forEach(function(e){e.playing&&(e.pause(),t.push(e))})}function n(){for(;t.length;)t.pop().play()}var t=[];J.handlePageVisibility(e,n)}(),x={createSound:i,create:i,destroySound:a,destroyAll:u,getSound:e,createGroup:n,file:ie,load:o,mute:c,unMute:s,fade:f,pauseAll:l,resumeAll:d,stopAll:p,play:v,pause:h,stop:m,log:g,canPlay:ie.canPlay,context:b,getOfflineContext:ve.getOfflineContext,effect:T.effect,extensions:ie.extensions,hasWebAudio:!!b,isSupported:ie.extensions.length>0,gain:T.gain,utils:ve,VERSION:y,Sound:z,Group:C},Object.defineProperties(x,{isTouchLocked:{get:function(){return S}},sounds:{get:function(){return T.sounds.slice(0)}},volume:{get:function(){return T.volume},set:function(e){T.volume=e}}}),Object.freeze(x)}var J={};J.handlePageVisibility=function(e,n){function t(){document[r]?e():n()}var r=void 0,o=void 0;"undefined"!=typeof document.hidden?(r="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",o="webkitvisibilitychange"),"undefined"!=typeof o&&document.addEventListener(o,t,!1)},J.handleTouchLock=function(e,n){function t(){e&&"suspended"===e.state?e.resume().then(function(){var r=e.createBuffer(1,1,44100),o=e.createBufferSource();o.buffer=r,o.connect(e.destination),o.start(0),o.stop(0),o.disconnect(),document.body.removeEventListener("touchend",t),n()}):(document.body.removeEventListener("touchend",t),n())}var r=navigator.userAgent,o=!!r.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i);return o&&document.body.addEventListener("touchend",t,!1),o};var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},K=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},Y=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},ee=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n},ne=[],te={},re=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],oe=document.createElement("audio");oe&&(re.forEach(function(e){var n=!!oe.canPlayType(e.type);n&&ne.indexOf(e.ext)===-1&&ne.push(e.ext),te[e.ext]=n}),oe=null);var ie={canPlay:te,containsURL:s,extensions:ne,getFileExtension:e,getSupportedFile:n,isAudioBuffer:t,isMediaElement:o,isMediaStream:i,isOscillatorType:a,isScriptConfig:u,isURL:c},ae=22050;b.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},C.Effect=S;var ue=A;A.EventEmitter=A,A.prototype._events=void 0,A.prototype._maxListeners=void 0,A.defaultMaxListeners=10,A.prototype.setMaxListeners=function(e){if(!M(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},A.prototype.emit=function(e){var n,t,r,o,i,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||O(this._events.error)&&!this._events.error.length)){if(n=arguments[1],n instanceof Error)throw n;var u=new Error('Uncaught, unspecified "error" event. ('+n+")");throw u.context=n,u}if(t=this._events[e],_(t))return!1;if(E(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),t.apply(this,o)}else if(O(t))for(o=Array.prototype.slice.call(arguments,1),a=t.slice(),r=a.length,i=0;i<r;i++)a[i].apply(this,o);return!0},A.prototype.addListener=function(e,n){var t;if(!E(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,E(n.listener)?n.listener:n),this._events[e]?O(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,O(this._events[e])&&!this._events[e].warned&&(t=_(this._maxListeners)?A.defaultMaxListeners:this._maxListeners,t&&t>0&&this._events[e].length>t&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},A.prototype.on=A.prototype.addListener,A.prototype.once=function(e,n){function t(){this.removeListener(e,t),r||(r=!0,n.apply(this,arguments))}if(!E(n))throw TypeError("listener must be a function");var r=!1;return t.listener=n,this.on(e,t),this},A.prototype.removeListener=function(e,n){var t,r,o,i;if(!E(n))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(t=this._events[e],o=t.length,r=-1,t===n||E(t.listener)&&t.listener===n)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,n);else if(O(t)){for(i=o;i-- >0;)if(t[i]===n||t[i].listener&&t[i].listener===n){r=i;break}if(r<0)return this;1===t.length?(t.length=0,delete this._events[e]):t.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,n)}return this},A.prototype.removeAllListeners=function(e){var n,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[e],E(t))this.removeListener(e,t);else if(t)for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},A.prototype.listeners=function(e){var n;return n=this._events&&this._events[e]?E(this._events[e])?[this._events[e]]:this._events[e].slice():[]},A.prototype.listenerCount=function(e){if(this._events){var n=this._events[e];if(E(n))return 1;if(n)return n.length}return 0},A.listenerCount=function(e,n){return e.listenerCount(n)};var ce=ue.EventEmitter,se=function(e){function n(){return K(this,n),ee(this,e.call(this))}return Y(n,e),n.prototype.off=function(e,n){return n?this.removeListener(e,n):e?this.removeAllListeners(e):this.removeAllListeners()},n}(ce);L.Group=function(){function e(e){var n=s+e;u.emit("progress",n/f)}function n(){s++,o(),u.emit("progress",s/f),r()}function t(e){o(),u.emit("error",e),r()}function r(){return 0===c.length?(l=null,void u.emit("complete")):(l=c.pop(),l.on("progress",e),l.once("loaded",n),l.once("error",t),void l.start())}function o(){l.off("progress",e),l.off("loaded",n),l.off("error",t)}function i(e){return c.push(e),f++,e}function a(){f=c.length,r()}var u=new se,c=[],s=0,f=0,l=void 0;return Object.freeze({on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),add:i,start:a})},z.__source={BufferSource:k,MediaSource:q,MicrophoneSource:P,OscillatorSource:D,ScriptSource:F};var fe=Math.PI/2,le=2*Math.PI,de=void 0,pe=void 0,ve=Object.freeze({getContext:G,getOfflineContext:U,cloneBuffer:V,reverseBuffer:I,ramp:H,getFrequency:W,microphone:X,timeCode:Z,waveformer:N}),he=new $;return he})},{}]},{},[1]);